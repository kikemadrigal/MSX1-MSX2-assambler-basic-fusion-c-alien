
1 IF P(0)=0 THEN PRINT"ERROR: Este ordenador no tiene al menos 128K de RAM mapeada.":PRINT:END
2 IF P(0)=1 THEN PRINT"ERROR: Error de disco al cargar NestorBASIC.":PRINT:END
3 IF P(0)=2 THEN PRINT"ERROR: No hay al menos un segmento libre en el mapeador primario.":PRINT:END
4 IF P(0)=4 THEN PRINT"ERROR 4, que en teoria no existe... avisa a Konami Man!!":PRINT:END
5 IF P(0)=3 THEN PRINT"NestorBASIC ya estaba instalado.":P(0)=2:E=USR(73) ELSE PRINT"NestorBASIC ha sido instalado."
6 E=USR(1):IF P(0)<7 THEN PRINT:PRINT"No hay memoria suficiente para cargar la musica !!":PRINT
7 IF P(0)<8 THEN PRINT"ATENCION: Solo pueden cargarse ficheros de musica menores de 16K!"

1 ' color letra negro, fondo letra: azul claro, borde blanco, quitamos las letras que aparecen abajo'
30 color 15,1,1:key off
40 screen 5,2,0
50 bload"loader.sc5",s
1 'Cargamos los sprites'
85 gosub 10000
90 DEFINT A-Z:DIM P(15): Z=USR(1)
100 _TURBO ON(P(),Z)
1 'Tenemos que definir esta variable para los archivos
1 'nextorbasic nos obliga a defnir los arrays en la primera línea del turbo bloque'
110 DIM F$(1)
120 F$(0)="RAM disponible:"+str$(P(0)*16)+"K.": E=USR(60)
1 'ponemos la pantalla de carga'
1 'Esto almacenará a partir en la page 0 o la direción 0 de la VRAM'
1 '140 F$(0)="loader.sc5": Z=USR(31): P(2)=0: P(3)=0: P(4)=&h8000: Z=USR(34): Z=USR(32)
1 'SCREEN 4'
1 '140 F$(0)="tiles.chr": Z=USR(31): P(2)=0: P(3)=0: P(4)=2048*3: Z=USR(34): Z=USR(32)
1 '150 F$(0)="tiles.clr": Z=USR(31): P(2)=0: P(3)=8192: P(4)=2048*3: Z=USR(34): Z=USR(32)
1 ' SCREEN 5, ponemos el tileset el la page 1 de la VRAM &h8000 o 32768Kb'
1 '140 F$(0)="TILESET.SC5": Z=USR(31): P(2)=0: P(3)=&H8000: P(4)=&h4000: Z=USR(34): Z=USR(32)
1 'Esto almacenará a partir en la page 2 o la direción &h10000 o  65536Kb'
130 preset(0,10):F$(0)="Loading tileset": E=USR(60)
150 F$(0)="TILESET.S05": Z=USR(31): P(2)=1: P(3)=1: P(4)=16536: Z=USR(34): E=USR(32)

170 preset(0,20):F$(0)="Loading basic file": E=USR(60)
180 _TURBO OFF
540 load"game.bas",r
1 '550 goto 550






1 '---------------------------------------------------------'
1 '------------------------Carga de srites------------------'
1 '---------------------------------------------------------'


1 ' Patrones:'
1 'Plano 0. Player--sprites del 1 al 7'
1 'Rutina cargar sprites con datas basic'
    10000 RESTORE
    1 ' vamos a meter 5 definiciones de sprites nuevos que serán 4 para el personaje y uno para la bola'
    10010 FOR I=0 TO 26:SP$=""
        10020 FOR J=1 TO 32:READ A$
            10025 SP$=SP$+CHR$(VAL(A$))
        10030 NEXT J
        10040 SPRITE$(I)=SP$
    10050 NEXT I
   
    10055 for sp=0 to 26
        10060 a$=""
        10065 for i=0 to (16)-1
            10070 read a
            10075 'vpoke &h7400+i, a
            10080 a$=a$+chr$(a)
        10085 next i
        10090 color sprite$(sp)=a$
    10095 next sp
10100 return 


10120 REM alien
10130 REM SPRITE DATA
10140 DATA 120,224,224,248,120,48,120,248
10150 DATA 187,188,144,120,120,72,72,108
10160 DATA 0,0,0,0,0,0,0,0
10170 DATA 0,0,0,0,0,0,0,0
10180 DATA 120,224,224,248,120,48,120,248
10190 DATA 139,252,240,240,240,80,224,176
10200 DATA 0,0,0,0,0,0,0,0
10210 DATA 0,0,0,0,0,0,0,0
10220 DATA 30,7,7,31,30,12,30,31
10230 DATA 209,63,15,15,15,10,7,13
10240 DATA 0,0,0,0,0,0,0,0
10250 DATA 0,0,0,0,0,0,0,0
10260 DATA 30,7,7,31,30,12,30,31
10270 DATA 209,63,15,15,15,10,7,13
10280 DATA 0,0,0,0,0,0,0,0
10290 DATA 0,0,0,0,0,0,0,0
10300 DATA 15,14,14,15,6,12,26,54
10310 DATA 44,56,56,56,40,80,160,0
10320 DATA 0,0,0,0,0,0,0,0
10330 DATA 0,0,0,0,0,0,0,0
10340 DATA 240,112,112,240,96,48,88,108
10350 DATA 52,28,28,28,20,10,5,0
10360 DATA 0,0,0,0,0,0,0,0
10370 DATA 0,0,0,0,0,0,0,0
10380 DATA 0,0,120,224,224,248,120,48
10390 DATA 120,248,131,252,240,112,80,88
10400 DATA 0,0,0,0,0,0,0,0
10410 DATA 0,0,0,0,0,0,0,0
10420 DATA 0,0,30,7,7,31,30,12
10430 DATA 30,31,193,63,15,14,10,26
10440 DATA 0,0,0,0,0,0,0,0
10450 DATA 0,0,0,0,0,0,0,0
10460 DATA 192,0,0,0,0,0,0,0
10470 DATA 0,0,0,0,0,0,0,0
10480 DATA 0,0,0,0,0,0,0,0
10490 DATA 0,0,0,0,0,0,0,0
10500 DATA 120,240,252,240,124,16,127,201
10510 DATA 236,212,218,106,42,42,0,0
10520 DATA 0,0,0,0,0,0,0,128
10530 DATA 128,128,128,192,64,64,0,0
10540 DATA 3,7,7,7,3,0,3,6
10550 DATA 7,62,102,73,145,0,0,0
10560 DATA 192,128,224,192,224,128,192,64
10570 DATA 224,160,144,144,16,0,0,0
10580 DATA 7,3,15,3,15,2,63,100
10590 DATA 77,74,86,213,149,149,0,0
10600 DATA 128,192,192,192,128,0,128,192
10610 DATA 192,192,192,128,0,0,0,0
10620 DATA 60,30,126,62,124,16,60,38
10630 DATA 126,87,150,153,136,0,0,0
10640 DATA 0,0,0,0,0,0,0,0
10650 DATA 0,192,96,32,144,0,0,0
10660 DATA 4,4,4,7,5,15,12,20
10670 DATA 20,36,72,145,0,0,0,0
10680 DATA 64,64,64,192,64,240,136,136
10690 DATA 136,136,136,16,0,0,0,0
10700 DATA 0,27,9,31,21,31,51,51
10710 DATA 115,83,86,170,0,0,0,0
10720 DATA 0,0,0,0,0,0,0,0
10730 DATA 0,0,0,0,0,0,0,0
10740 DATA 17,17,17,31,21,127,137,137
10750 DATA 137,137,136,68,0,0,0,0
10760 DATA 0,0,0,0,0,128,128,64
10770 DATA 64,32,144,72,0,0,0,0
10780 DATA 0,216,144,248,168,248,204,204
10790 DATA 206,202,106,85,0,0,0,0
10800 DATA 0,0,0,0,0,0,0,0
10810 DATA 0,0,0,0,0,0,0,0
10820 DATA 123,107,123,123,33,35,36,24
10830 DATA 24,24,255,152,188,164,0,0
10840 DATA 224,160,224,224,0,0,0,0
10850 DATA 0,0,192,64,96,96,0,0
10860 DATA 60,52,60,60,8,8,9,6
10870 DATA 6,6,15,22,106,146,0,255
10880 DATA 240,208,240,240,64,192,0,0
10890 DATA 0,0,128,64,64,64,0,248
10900 DATA 125,93,125,125,8,12,2,1
10910 DATA 1,1,63,33,99,98,0,0
10920 DATA 224,96,224,224,64,64,64,128
10930 DATA 128,128,240,144,208,80,0,0
10940 DATA 121,89,121,121,16,24,4,3
10950 DATA 3,3,15,19,18,18,0,0
10960 DATA 224,96,224,224,128,128,128,0
10970 DATA 0,0,128,64,176,72,0,0
10980 DATA 2,66,99,81,121,111,57,15
10990 DATA 1,1,3,61,33,33,0,0
11000 DATA 64,66,206,138,158,246,156,240
11010 DATA 128,128,192,188,132,132,0,0
11020 DATA 2,2,3,1,13,31,53,63
11030 DATA 105,121,7,9,9,9,0,0
11040 DATA 64,64,192,128,176,248,172,252
11050 DATA 150,158,224,144,144,144,0,0
11060 DATA 48,56,252,50,49,121,123,254
11070 DATA 120,120,120,120,120,120,120,48
11080 DATA 0,0,0,0,0,0,0,0
11090 DATA 0,0,0,0,0,0,0,0
11100 DATA 195,195,255,255,255,126,126,126
11110 DATA 126,126,126,255,255,255,255,195
11120 DATA 0,0,0,0,0,0,0,0
11130 DATA 0,0,0,0,0,0,0,0
11140 DATA 128,64,32,16,8,4,2,63
11150 DATA 63,2,4,8,16,32,64,128
11160 DATA 1,2,4,136,208,224,240,248
11170 DATA 248,240,224,208,136,4,2,1
11180 DATA 0,0,0,0,0,0,0,63
11190 DATA 63,0,0,0,0,0,0,0
11200 DATA 0,0,0,128,192,224,240,248
11210 DATA 248,240,224,192,128,0,0,0

11220 REM COLOR MODE2 DATA
11230 DATA 7,7,7,7,7,15,5,5
11240 DATA 5,5,5,5,5,8,8,8
11250 DATA 7,7,7,7,7,15,5,5
11260 DATA 5,5,5,5,5,8,8,8
11270 DATA 7,7,7,7,7,15,5,5
11280 DATA 5,5,5,5,5,8,8,8
11290 DATA 7,7,7,7,7,15,5,5
11300 DATA 5,5,5,5,5,8,8,8
11310 DATA 7,7,7,7,15,5,5,5
11320 DATA 5,5,5,8,8,8,8,8
11330 DATA 7,7,7,7,15,5,5,5
11340 DATA 5,5,5,8,8,8,8,8
11350 DATA 8,8,7,7,7,7,7,15
11360 DATA 5,5,5,5,5,5,5,8
11370 DATA 8,8,7,7,7,7,7,15
11380 DATA 5,5,5,5,5,5,5,8
11390 DATA 8,8,8,8,8,8,8,8
11400 DATA 8,8,8,8,8,8,8,8
11410 DATA 3,3,3,3,3,8,8,8
11420 DATA 8,8,8,10,10,10,15,15
11430 DATA 3,3,3,3,3,8,8,8
11440 DATA 8,8,8,10,10,10,10,10
11450 DATA 3,3,3,3,3,8,8,8
11460 DATA 8,8,8,10,10,10,10,10
11470 DATA 3,3,3,3,3,8,8,8
11480 DATA 8,8,8,10,10,10,10,10
11490 DATA 13,13,13,13,9,9,8,8
11500 DATA 10,10,10,10,15,10,15,15
11510 DATA 13,13,13,9,9,9,8,8
11520 DATA 10,10,10,10,15,10,15,15
11530 DATA 13,13,13,9,9,9,8,8
11540 DATA 10,10,10,10,15,10,15,15
11550 DATA 13,13,13,9,9,9,8,8
11560 DATA 10,10,10,10,15,10,15,15
11570 DATA 10,10,10,10,8,8,8,8
11580 DATA 8,8,8,8,8,10,10,10
11590 DATA 10,10,10,10,8,8,8,8
11600 DATA 8,8,8,8,8,10,10,1
11610 DATA 10,10,10,10,8,8,8,8
11620 DATA 8,8,8,8,8,10,10,10
11630 DATA 10,10,10,10,8,8,8,8
11640 DATA 8,8,8,8,8,10,10,10
11650 DATA 8,8,3,3,3,3,3,3
11660 DATA 3,3,8,10,10,10,10,10
11670 DATA 8,8,8,8,3,3,3,3
11680 DATA 3,3,8,10,10,10,10,10
11690 DATA 6,6,6,6,6,6,6,6
11700 DATA 6,6,6,6,6,6,6,6
11710 DATA 10,10,6,6,6,6,6,6
11720 DATA 6,6,6,6,6,6,6,6
11730 DATA 8,8,8,8,8,8,8,8
11740 DATA 8,8,8,8,8,8,8,8
11750 DATA 2,2,2,2,2,2,2,2
11760 DATA 2,2,2,2,2,2,2,2




















1 '1 'Cargar mundo con los mapas de los niveles en el buffer o array'
1 '    11100 bload"world0.bin",r
1 '    11110 md=&hd001
1 '    11120 for f=0 to 24-1
1 '        11130 for c=0 to 100-1
1 '            11140 tn=peek(md):md=md+1
1 '            11150 m(c,f)=tn
1 '        11170 next c
1 '    11180 next f
1 '11190 return



1 '1 'Cargar mapa de disco y meterlo en la VRAM
1 '    11400 'md=&hd001
1 '    11410 md=6144: 'Hasta 6912'
1 '    11450 for f=0 to 24-1
1 '        11460 for c=0 to 32-1
1 '            1 'Como los tiles los habíamos cargado previamente en RAM ahora solo los pasamos a VRAM'
1 '            11470 vpoke md,m(c,f)
1 '            11480 md=md+1
1 '        11490 next c
1 '    11500 next f  
1 '11510 return
